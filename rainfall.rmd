---
title: "Rainfall Report"
author: Group B3
date: 02/11/2021
output: pdf_document
---


```{r include = FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


```{r include = FALSE}
library(tidyverse)
library(ggplot2)
```


```{r include = FALSE}
sys.source('R/functions/GetData.R', envir = knitr::knit_global())
X <- GetData()
readings <- X$readings
stations <- X$stations
rm(X)
```


```{r include = FALSE}
sys.source('R/functions/RainfallAverages.R', envir = knitr::knit_global())
averages <- RainfallAverages(readings = readings)
str(averages)
```


```{r include = FALSE}
sys.source('R/functions/RainfallAveragesReduce.R', envir = knitr::knit_global())
reduced <- RainfallAveragesReduce(averages = averages)
str(reduced)
```


```{r include = FALSE}
sys.source('R/functions/RainfallExtremes.R', envir = knitr::knit_global())
extremes <- RainfallExtremes(readings = readings)
str(extremes)
```



## Rainfall Graphs

### Mean Rainfall $vs.$ Dates

The line graph of mean rainfall, per month, against dates during the years $1850$ to $1900$.
```{r out.width = '55%', fig.align = 'center'}
plot(x = averages$date, y = averages$mean_rainfall_month,
     type = 'l', frame.plot = FALSE, xlab = 'Date', ylab = 'Mean Rainfall per Month')
```

### A raster representation of mean rainfall

A raster representation of mean rainfall per month every year; for the years $1850$ to $1900$.

```{r out.width = '65%', fig.align = 'center'}
ggplot(data = averages) +
  geom_raster(mapping = aes(x = year, y = month, fill = mean_rainfall_month )) +
  theme_minimal()
```

### Mean Rainfall per Month Across the Years

Each bar represents the mean amount of rainfall that fell, during the named month, across the years 1850 to 1900.

```{r out.width = '65%', fig.align = 'center'}
ggplot(data = reduced, mapping = aes(x = month, y = mean)) +
  geom_bar(stat = 'identity') +
  geom_text(mapping = aes(label  = round(mean, digits = 1)), vjust = 0) +
  theme_minimal() +
  theme(axis.text.x = element_text(size = 11, angle = 90),
        axis.text.y = element_text(face = "bold", size = 11),
        axis.title.y = element_text(size = 13),
        aspect.ratio = 0.65) +
  ylab(label = 'Mean Rainfall\n') +
  xlab(label = '')
```


\pagebreak

## Extreme Tables


The highest individual readings ...
```{r include = FALSE}
sys.source('R/functions/HighestIndividualReadings.R', envir = knitr::knit_global())
hir <- HighestIndividualReadings(readings = readings, stations = stations)
knitr::kable(hir, caption = "Highest Individual Readings", format = 'latex')
```



Highest and lowest annual station records
```{r include = FALSE}
sys.source('R/functions/HLAS.R', envir = knitr::knit_global())
hlas <- HLAS(extremes = extremes, stations = stations)
```

Highest:
```{r}
hlas$highest
```

Lowest:
```{r}
hlas$lowest
```



Tally of the wettest months

```{r include = FALSE}
sys.source('R/functions/WettestMonthTallies.R', envir = knitr::knit_global())

```


Wettest:
```{r}
WettestMonthTallies(readings = readings)
```


















